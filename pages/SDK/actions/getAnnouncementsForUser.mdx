import { Tabs } from "nextra/components";

# getAnnouncementsForUser

Filters a list of given announcements based on if they are relevant for the user.

## Usage

<Tabs items={['example.ts', 'client.ts']} selectedIndex={0}>
  <Tabs.Tab>
    ```ts
    import { stealthClient } from "./client";

    const userAnnouncements = await stealthClient.getAnnouncementsForUser({
      announcements,
      spendingPublicKey,
      viewingPrivateKey,
      excludeList,
      includeList
    });

    /*
    Array of announcements relevant to the user.

    [
      {
        caller: "0x...",
        ephemeralPubKey: "0x...",
        metadata: "0x...",
        schemeId: 1n,
        stealthAddress: "0x...",
        more log data...
      }
    ]
    */
    ```

  </Tabs.Tab>
  <Tabs.Tab>
    ```ts
    import { createStealthClient } from "@scopelift/stealth-address-sdk";

    export const stealthClient = createStealthClient({
      chainId,
      rpcUrl,
    });
    ```

  </Tabs.Tab>
</Tabs>

## Return Value

- **Type:** [`GetAnnouncementsForUserReturnType`](../glossary/types.md#getannouncementsforuserreturntype)

  An array of announcements relevant to the user, filtered by the provided criteria.

## Parameters

### announcements

- **Type:** [`AnnouncementLog[]`](../glossary/types.md#announcementlog)

  An array of announcement logs to be processed and filtered.

```ts {2}
const userAnnouncements = await stealthClient.getAnnouncementsFroUser({
  announcements,
  spendingPublicKey,
  viewingPrivateKey,
  excludeList,
  includeList,
});
```

### spendingPublicKey

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The user's spending public key.

```ts {3}
const userAnnouncements = await stealthClient.getAnnouncementsFroUser({
  announcements,
  spendingPublicKey,
  viewingPrivateKey,
  excludeList,
  includeList,
});
```

### viewingPrivateKey

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The user's viewing private key.

```ts {4}
const userAnnouncements = await stealthClient.getAnnouncementsFroUser({
  announcements,
  spendingPublicKey,
  viewingPrivateKey,
  excludeList,
  includeList,
});
```

### excludeList (optional)

- **Type:** [`EthAddress[]`](../glossary/types.md#ethaddress)

  Addresses to exclude from the results.

```ts {5}
const userAnnouncements = await stealthClient.getAnnouncementsFroUser({
  announcements,
  spendingPublicKey,
  viewingPrivateKey,
  excludeList,
  includeList,
});
```

### includeList (optional)

- **Type:** [`EthAddress[]`](../glossary/types.md#ethaddress)

  Addresses to specifically include in the results.

```ts {6}
const userAnnouncements = await stealthClient.getAnnouncementsFroUser({
  announcements,
  spendingPublicKey,
  viewingPrivateKey,
  excludeList,
  includeList,
});
```
