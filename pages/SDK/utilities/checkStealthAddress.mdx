import { Tabs } from "nextra/components";

# checkStealthAddress

Checks if an [`Announce`](../glossary/types.mdx#announce) event is intended for the user by comparing the derived stealth address with the user's stealth address.

## Import

```ts
import { checkStealthAddress } from "@scopelift/stealth-address-sdk";
```

## Usage

<Tabs items={['example.ts']} selectedIndex={0}>
  <Tabs.Tab>
    ```ts
    import { checkStealthAddress } from "@scopelift/stealth-address-sdk";

    const isForUser = checkStealthAddress({
      ephemeralPublicKey: "0x...",
      schemeId: 1,
      spendingPublicKey: "0x...",
      userStealthAddress: "0x...",
      viewingPrivateKey: "0x...",
      viewTag: "0x..."
    });

    // true
    ```

  </Tabs.Tab>
</Tabs>

## Return Value

- **Type:** `boolean`
  Returns `true` if the derived stealth address matches the user's stealth address, indicating the announcement is intended for the user; returns `false` otherwise.

## Parameters

### ephemeralPublicKey

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The ephemeral public key from the announcement.

```ts {2}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```

### schemeId

- **Type:** [`VALID_SCHEME_ID`](../glossary/types.md#valid_scheme_id)

  The scheme ID used during the stealth address generation.

```ts {3}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```

### spendingPublicKey

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The user's spending public key.

```ts {4}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```

### userStealthAddress

- **Type:** [`EthAddress`](../glossary/types.md#ethaddress)

  The user's stealth address, against which the derived address is compared.

```ts {5}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```

### viewingPrivateKey

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The user's viewing private key used to derive the shared secret.

```ts {6}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```

### viewTag

- **Type:** [`HexString`](../glossary/types.md#hexstring)

  The view tag from the announcement, used to quickly filter announcements not intended for the user.

```ts {7}
const isForUser = checkStealthAddress({
  ephemeralPublicKey: "0x...",
  schemeId: 1,
  spendingPublicKey: "0x...",
  userStealthAddress: "0x...",
  viewingPrivateKey: "0x...",
  viewTag: "0x...",
});
```
